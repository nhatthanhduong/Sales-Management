<!-- Use Flask syntax to inherits the format of base.html -->
{% extends 'base.html' %}

<!-- Head block inheriting from base.html's head -->
{% block head %}

{% endblock %}

<!-- Body block inheriting from base.html's body -->
{% block body %}
<div>
    <h1>Purchase Order Management</h1>
    <div>
        <div>
            <table>
                <tr>
                    <th>Ordering Date</th>
                    <th>Payment Date</th>
                    <th>Supplier ID</th>
                    <th>Supplier Name</th>
                    <th>Actions</th>
                </tr>
                <!-- Use for loop to display all supplier in the database row by row -->
                {% for purchase_order in purchase_orders %}
                    <tr>
                        <td>{{ purchase_order.orderingDate }}</td>
                        <td>{{ purchase_order.paymentDate }}</td>
                        <td>{{ purchase_order.supplierID }}</td>
                        <td>{{ purchase_order.supplierName }}</td>
                        <td>
                            <!-- Pass supplier's id to the URL, which the python function uses to determine the supplier to delete -->
                            <a id="action", href="/purchase_order/delete/{{ purchase_order.purchaseOrderID }}">Delete</a>
                            <!-- Pass supplier's id to the URL, which the python function uses to determine the supplier to update -->
                            <a id="action", href="/purchase_order/update/{{ purchase_order.purchaseOrderID }}">Update</a>
                            <a id="action", href="/purchase_order/add_products/{{ purchase_order.purchaseOrderID}}">Add Products</a>
                        </td>
                    </tr>
                {% endfor %}
                
                <!-- Get user's input for new supplier and send it to the main route for python program -->
                <form action="/purchase_order" method="POST">
                    <tr>
                        <td><input type="date" name="orderingDate" value="{{ today }}"></td>
                        <td><input type="date" name ="paymentDate"></td>
                        <td><input type="text" name="supplierID" autocomplete="off"></td>
                        <td><input type="text" name="supplierName" autocomplete="off" list="suppliers"></td>
                        <td><input type="submit" value="Add Purchase Order"></td>
                    </tr>
                </form>
                <datalist id="suppliers">
                    {% for supplier in suppliers %}
                        <option value="{{ supplier.supplierName }}"></option>
                    {% endfor %}
                </datalist>
            </table>
        </div>

        <div>
            <h2>Supplier List</h2>
            <table>
                <tr>
                    <th>Supplier ID</th>
                    <th>Supplier Name</th>
                    <th>Supplier Address</th>
                </tr>
                {% for supplier in suppliers %}
                    <tr>
                        <td>{{ supplier.supplierID }}</td>
                        <td>{{ supplier.supplierName }}</td>
                        <td>{{ supplier.supplierAddress }}</td>
                    </tr>
                {% endfor %}
            </table>
        </div>
    </div>
    
    
</div>
{% endblock%} 